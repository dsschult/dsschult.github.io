<!doctype html><html><head><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Code+Pro:300|Tangerine:700"><link rel=stylesheet href=/static/modern-normalize.css><link rel=stylesheet href=/static/pygments.css><link rel=stylesheet href=/static/style.css><title>Home - dsschult.com</title></head><body><header><a href=/ ><img class=logo src=/static/logo.jpg></a><div class=title><h1><a href=/ >David Schultz</a></h1><h3>Just another programming blog.</h3></div><nav><a href=/ >Blog</a><a href=/about.html>About</a></nav></header><main><div class=entries><article class=entry><header class=entry-header><h3><a href=/entries/mongo_external_sort_weight.html> MongoDB: Sorting by external weights </a></h3></header><div class=entry-body><p>MongoDB aggregations can be sorted by any field in a document,<br> but they can also be sorted by external factors.</p><p>Say we have some documents with tags:</p><div class=codehilite><pre><span></span><span class=p>{</span><span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;tag&#39;</span><span class=p>:</span> <span class=s1>&#39;foo&#39;</span><span class=p>}</span>
<span class=p>{</span><span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=s1>&#39;b&#39;</span><span class=p>,</span> <span class=s1>&#39;tag&#39;</span><span class=p>:</span> <span class=s1>&#39;bar&#39;</span><span class=p>}</span>
<span class=p>{</span><span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=s1>&#39;c&#39;</span><span class=p>,</span> <span class=s1>&#39;tag&#39;</span><span class=p>:</span> <span class=s1>&#39;baz&#39;</span><span class=p>}</span>
<span class=p>{</span><span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=s1>&#39;d&#39;</span><span class=p>,</span> <span class=s1>&#39;tag&#39;</span><span class=p>:</span> <span class=s1>&#39;foo&#39;</span><span class=p>}</span>
<span class=p>{</span><span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=s1>&#39;e&#39;</span><span class=p>,</span> <span class=s1>&#39;tag&#39;</span><span class=p>:</span> <span class=s1>&#39;bar&#39;</span><span class=p>}</span>
<span class=p>{</span><span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=s1>&#39;f&#39;</span><span class=p>,</span> <span class=s1>&#39;tag&#39;</span><span class=p>:</span> <span class=s1>&#39;baz&#39;</span><span class=p>}</span>
<span class=p>{</span><span class=s1>&#39;id&#39;</span><span class=p>:</span> <span class=s1>&#39;g&#39;</span><span class=p>,</span> <span class=s1>&#39;tag&#39;</span><span class=p>:</span> <span class=s1>&#39;foo&#39;</span><span class=p>}</span>
</pre></div><p><a href=/entries/mongo_external_sort_weight.html>&raquo;more</a></p></div></article></div></main><aside class=sidebar><section><h3><a href=/about.html>About Me</a></h3><p>Software developer, devops, full stack, etc.</p></section><section><h3>Search</h3><form action=https://www.google.com/search><input type=hidden name=q value=site:dsschult.com><input id=searchbox type=text name=q value></form></section><section><h4>Other Places</h4><div> · <a href=https://github.com/dsschult>github</a> · <a href=https://www.linkedin.com/in/dsschultz/ >linkedin</a> · </div></section></aside><footer></footer></body></html>